/*!
 * # Semantic UI 2.0.0 - Video
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Copyright 2015 Contributorss
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,n,t,o){"use strict";function i(e,n,t){return n<=e.length?e:i(n,t+e,t)}function a(e,n){for(var t=0;t<n.length;t++)if(e>=n.start(t)&&e<=n.end(t))return!0;return!1}e.fn.video=function(t){{var r,s=e(this),u=s.selector||"",c=(new Date).getTime(),l=[],m=arguments[0],d="string"==typeof m,f=[].slice.call(arguments,1);n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame||function(e){setTimeout(e,0)}}return s.each(function(){var p,g=e.isPlainObject(t)?e.extend(!0,{},e.fn.video.settings,t):e.extend({},e.fn.video.settings),v=(g.selector,g.className,g.error,g.metadata,g.namespace),b=(g.templates,"."+v),h="module-"+v,y=(e(n),e(this)),k=this,C=y.data(h);p={initialize:function(){p.debug("Initializing video"),p.create(),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),C=p,y.data(h,p)},create:function(){p.debug("Video create called")},add:{playpauseButton:function(n){n=e(n),n.on("click"+b,function(){k.paused?k.play():k.pause()}),y.on("play"+b,function(){n.addClass("active")}).on("pause"+b,function(){n.removeClass("active")})},playbackrateButton:function(n,t,o){switch(n=e(n),o){case"push":default:n.on("mousedown"+b,function(){k.playbackRate=t}),n.on("mouseup"+b+" mouseleave"+b,function(){k.playbackRate=k.defaultPlaybackRate});break;case"switch":}y.on("ratechange"+b,function(e){console.log(k.playbackRate)})},currentTime:function(e){y.on("timeupdate"+b,function(){var n=new Date(1e3*k.currentTime),t=i(String(n.getHours()-1),1,"0")+":"+i(String(n.getMinutes()),2,"0")+":"+i(String(n.getSeconds()),2,"0");e.text(t)})},remainingTime:function(e){y.on("timeupdate"+b,function(){var n=new Date(1e3*(k.duration-k.currentTime)),t=i(String(n.getHours()-1),1,"0")+":"+i(String(n.getMinutes()),2,"0")+":"+i(String(n.getSeconds()),2,"0");e.text(t)})},timeRange:function(n){n=e(n);var t=!0;n.on("change",function(e){var t=n.val()/(n.prop("max")-n.prop("min"));k.fastSeek?k.fastSeek(k.duration*t):k.currentTime=k.duration*t}).on("mousedown"+b,function(){t=!1}).on("mouseup"+b,function(){t=!0}),y.on("timeupdate"+b,function(){if(t){var e=k.currentTime/k.duration,o=e*(n.prop("max")-n.prop("min"));n.val(o)}}).on("loadstart"+b+" seeking"+b,function(){a(k.currentTime,k.buffered)||n.prop("disabled",!0)}).on("loadeddata"+b+" seeked"+b,function(){n.prop("disabled",!1)})},volume:{upButton:function(n,t){var t=t==o?.1:t;n.on("click"+b,function(){k.volume=Math.min(k.volume+t,1),console.log(e(this)),e(this).hasClass("disabled")&&k.muted&&(k.muted=!1)}),y.on("volumechange"+b,function(){k.muted?n.addClass("disabled"):n.removeClass("disabled")})},downButton:function(n,t){var t=t==o?.1:t;n.on("click"+b,function(){k.volume=Math.max(k.volume-t,0),e(this).hasClass("disabled")&&k.muted&&(k.muted=!1)}),y.on("volumechange"+b,function(){k.muted?n.addClass("disabled"):n.removeClass("disabled")})},progress:function(n){n.progress({percent:100}),n.on("click"+b,function(){e(this).hasClass("disabled")&&k.muted&&(k.muted=!1)}),y.on("volumechange"+b,function(){var e=k.muted?0:k.volume;n.progress({percent:100*e}),k.muted?n.addClass("disabled"):n.removeClass("disabled")})}},muteButton:function(e){e.on("click"+b,function(){k.muted=!k.muted}),y.on("volumechange"+b,function(){k.muted?e.addClass("active"):e.removeClass("active")})}},destroy:function(){p.verbose("Destroying previous instance of video"),$video=null,p.reset(),y.removeData(h).off(b)},refresh:function(){p.verbose("Refreshing selector cache"),$video=k},reset:function(){p.debug("Clearing video"),g.onReset()},setting:function(n,t){if(p.debug("Changing setting",n,t),e.isPlainObject(n))e.extend(!0,g,n);else{if(t===o)return g[n];g[n]=t}},internal:function(n,t){if(e.isPlainObject(n))e.extend(!0,p,n);else{if(t===o)return p[n];p[n]=t}},debug:function(){g.debug&&(g.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,g.name+":"),p.debug.apply(console,arguments)))},verbose:function(){g.verbose&&g.debug&&(g.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),p.verbose.apply(console,arguments)))},error:function(){p.error=Function.prototype.bind.call(console.error,console,g.name+":"),p.error.apply(console,arguments)},performance:{log:function(e){var n,t,o;g.performance&&(n=(new Date).getTime(),o=c||n,t=n-o,c=n,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":t})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var n=g.name+":",t=0;c=!1,clearTimeout(p.performance.timer),e.each(l,function(e,n){t+=n["Execution Time"]}),n+=" "+t+"ms",u&&(n+=" '"+u+"'"),s.length>1&&(n+=" ("+s.length+")"),(console.group!==o||console.table!==o)&&l.length>0&&(console.groupCollapsed(n),console.table?console.table(l):e.each(l,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(n,t,i){var a,s,u,c=C;return t=t||f,i=k||i,"string"==typeof n&&c!==o&&(n=n.split(/[\. ]/),a=n.length-1,e.each(n,function(t,i){var r=t!=a?i+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(c[r])&&t!=a)c=c[r];else{if(c[r]!==o)return s=c[r],!1;if(!e.isPlainObject(c[i])||t==a)return c[i]!==o?(s=c[i],!1):(p.error(n),!1);c=c[i]}})),e.isFunction(s)?u=s.apply(i,t):s!==o&&(u=s),e.isArray(r)?r.push(u):r!==o?r=[r,u]:u!==o&&(r=u),s}},d?(C===o&&p.initialize(),p.invoke(m)):(C!==o&&C.invoke("destroy"),p.initialize())}),r!==o?r:this},e.fn.video.settings={name:"Video",namespace:"video",debug:!0,verbose:!0,performance:!0,className:{active:"active"},selector:{playButton:".play"}}}(jQuery,window,document);